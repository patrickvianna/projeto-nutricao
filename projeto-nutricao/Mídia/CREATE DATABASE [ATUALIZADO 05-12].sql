-- MySQL Script generated by MySQL Workbench
-- Tue Dec  5 20:50:55 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `mydb` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`LOV_NUTRIENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`LOV_NUTRIENTE` ;

CREATE TABLE IF NOT EXISTS `mydb`.`LOV_NUTRIENTE` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `TEXTO` VARCHAR(45) NOT NULL,
  `UNIDADE_MEDIDA` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`TAB_ALIMENTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`TAB_ALIMENTO` ;

CREATE TABLE IF NOT EXISTS `mydb`.`TAB_ALIMENTO` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NOME` VARCHAR(45) NOT NULL,
  `DESCRICAO` VARCHAR(450) NULL,
  `TIPO` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`TAB_NUTRIENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`TAB_NUTRIENTE` ;

CREATE TABLE IF NOT EXISTS `mydb`.`TAB_NUTRIENTE` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `QTD` FLOAT NULL,
  `LOV_NUTRIENTE_ID` INT NOT NULL,
  `TAB_ALIMENTO_ID` INT NOT NULL,
  PRIMARY KEY (`ID`, `LOV_NUTRIENTE_ID`, `TAB_ALIMENTO_ID`),
  INDEX `fk_TAB_NUTRIENTE_LOV_NUTRIENTE_idx` (`LOV_NUTRIENTE_ID` ASC),
  INDEX `fk_TAB_NUTRIENTE_TAB_ALIMENTO1_idx` (`TAB_ALIMENTO_ID` ASC),
  CONSTRAINT `fk_TAB_NUTRIENTE_LOV_NUTRIENTE`
    FOREIGN KEY (`LOV_NUTRIENTE_ID`)
    REFERENCES `mydb`.`LOV_NUTRIENTE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TAB_NUTRIENTE_TAB_ALIMENTO1`
    FOREIGN KEY (`TAB_ALIMENTO_ID`)
    REFERENCES `mydb`.`TAB_ALIMENTO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`TAB_PESSOA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`TAB_PESSOA` ;

CREATE TABLE IF NOT EXISTS `mydb`.`TAB_PESSOA` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NOME` VARCHAR(45) NULL,
  `IDADE` INT NULL,
  `EMAIL` VARCHAR(45) NULL,
  `LOGIN` VARCHAR(45) NULL,
  `SENHA` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`TAB_REFEICAO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`TAB_REFEICAO` ;

CREATE TABLE IF NOT EXISTS `mydb`.`TAB_REFEICAO` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NOME` VARCHAR(45) NULL,
  `PRECO` FLOAT NULL,
  `TAB_PESSOA_ID` INT NOT NULL,
  PRIMARY KEY (`ID`, `TAB_PESSOA_ID`),
  INDEX `fk_TAB_REFEICAO_TAB_PESSOA1_idx` (`TAB_PESSOA_ID` ASC),
  CONSTRAINT `fk_TAB_REFEICAO_TAB_PESSOA1`
    FOREIGN KEY (`TAB_PESSOA_ID`)
    REFERENCES `mydb`.`TAB_PESSOA` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = armscii8;


-- -----------------------------------------------------
-- Table `mydb`.`TAB_REFEICAO_has_TAB_ALIMENTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`TAB_REFEICAO_has_TAB_ALIMENTO` ;

CREATE TABLE IF NOT EXISTS `mydb`.`TAB_REFEICAO_has_TAB_ALIMENTO` (
  `TAB_REFEICAO_ID` INT NOT NULL,
  `TAB_REFEICAO_TAB_PESSOA_ID` INT NOT NULL,
  `TAB_ALIMENTO_ID` INT NOT NULL,
  `QTD_ALIMENTO` FLOAT NULL,
  PRIMARY KEY (`TAB_REFEICAO_ID`, `TAB_REFEICAO_TAB_PESSOA_ID`, `TAB_ALIMENTO_ID`),
  INDEX `fk_TAB_REFEICAO_has_TAB_ALIMENTO_TAB_ALIMENTO1_idx` (`TAB_ALIMENTO_ID` ASC),
  INDEX `fk_TAB_REFEICAO_has_TAB_ALIMENTO_TAB_REFEICAO1_idx` (`TAB_REFEICAO_ID` ASC, `TAB_REFEICAO_TAB_PESSOA_ID` ASC),
  CONSTRAINT `fk_TAB_REFEICAO_has_TAB_ALIMENTO_TAB_REFEICAO1`
    FOREIGN KEY (`TAB_REFEICAO_ID` , `TAB_REFEICAO_TAB_PESSOA_ID`)
    REFERENCES `mydb`.`TAB_REFEICAO` (`ID` , `TAB_PESSOA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TAB_REFEICAO_has_TAB_ALIMENTO_TAB_ALIMENTO1`
    FOREIGN KEY (`TAB_ALIMENTO_ID`)
    REFERENCES `mydb`.`TAB_ALIMENTO` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = armscii8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
